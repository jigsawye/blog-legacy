{"data":{"site":{"siteMetadata":{"title":"JIGSAWYE","author":"Evan Ye","siteUrl":"https://jigsawye.com","disqusShortname":"jigsawnotes"}},"markdownRemark":{"id":"da236dd1-591a-52f1-b926-b5689ed76661","html":"<p>幾週前 React 發佈了 <a href=\"https://reactjs.org/blog/2018/10/23/react-v-16-6.html\">16.6</a>，一口氣推出了 <code class=\"language-text\">lazy</code>、<code class=\"language-text\">memo</code> 及 <code class=\"language-text\">contextType</code> 等新功能。而其中的 <code class=\"language-text\">React.memo</code> 就是過去 <code class=\"language-text\">React.PureComponent</code> 的 HOC 版本，比起過去改動成 PureComponent 要動到較大量的程式碼，如今只要套上 <code class=\"language-text\">React.memo</code> 即可，不過比較 class component 可以寫 class method 自定 shouldComponentUpdate 的實作，function component 好像不能這樣搞？其實 memo 是有第二個參數可以使用的。</p>\n<!-- more -->\n<p>以往要讓 Component 的 <code class=\"language-text\">shouldComponentUpdate</code> 自動進行 shallow equal 比對進行 re-render，只要把 class component 的 <code class=\"language-text\">extends React.Component</code> 部分改為 <code class=\"language-text\">extends React.PureComponent</code> 即可：</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- class Demo extends React.Component {</span>\n<span class=\"token inserted\">+ class Demo extends React.PureComponent {</span>\n    // Something else...\n\n    render() {\n      return &lt;div>Demo&lt;/div>;\n    }\n  }</code></pre></div>\n<p>但假設 Component 是個 function component，那就必須改寫成單單只有 <code class=\"language-text\">render</code> function 的 class component，整體看起來會相當的不直觀：</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted\">- const Demo = ({ children }) => &lt;div>{children}&lt;/div>;</span>\n<span class=\"token inserted\">+ class Demo extends React.PureComponent {</span>\n<span class=\"token inserted\">+   render() {</span>\n<span class=\"token inserted\">+     return &lt;div>{this.props.children}&lt;/div>;</span>\n<span class=\"token inserted\">+   }</span>\n<span class=\"token inserted\">+ }</span></code></pre></div>","excerpt":"幾週前 React 發佈了  16.6 ，一口氣推出了  、  及   等新功能。而其中的   就是過去   的 HOC 版本，比起過去改動成 PureComponent 要動到較大量的程式碼，如今只要套上   即可，不過比較 class component 可以寫 class…","fields":{"slug":"/2018/11/30/advanced-react-memo/"},"frontmatter":{"title":"React.memo 的進階使用","date":"2018-11-30T12:00:00.000Z"}}},"pageContext":{"slug":"/2018/11/30/advanced-react-memo/"}}